type: service
name: emotion-class-svc2
image:
  type: image
  image_uri: public.ecr.aws/truefoundrycloud/emotion-classification:0.1.1
  command: uvicorn app:app --host 0.0.0.0 --port 8000
ports:
  - host: svc2-{{WORKSPACE_NAME}}.{{BASE_DOMAIN}}
    port: 8000
    expose: true
    protocol: TCP
workspace_fqn: {{CLUSTER_FQN}}:{{WORKSPACE_NAME}}
replicas: 1
auto_shutdown:
  wait_time: 120
labels:
  tfy_openapi_path: openapi.json
allow_interception: false
resources:
  node:
    type: node_selector
    capacity_type: spot_fallback_on_demand
  devices:
    - name: T4
      type: nvidia_gpu
      count: 1
  cpu_request: 2
  cpu_limit: 4
  memory_request: 13600
  memory_limit: 16000
  ephemeral_storage_request: 20000
  ephemeral_storage_limit: 100000
